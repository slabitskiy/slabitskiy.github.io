$(document).ready(function(){function e(e,t){b&&$(window).innerWidth()<=k&&$(".menu_nav").on("click",e,function(e){e.preventDefault(),$(this).parents(t).removeClass("active")})}function t(){b&&$(window).innerWidth()<=k&&$(".menu_nav").on("click",".category-name",function(e){e.preventDefault(),$(this).parents(".category-block").addClass("active")})}function n(){if(b&&$(window).innerWidth()<=k){var e=$(".menu_nav").find(".category-block");e.each(function(e,t){var n='<li class="list-name"><p class="name-text">'+$(this).find(".category-name").find(".name-text").text()+"</p></li>";$(n).prependTo($(this).find(".category-list"))})}}function o(){b&&$(window).innerWidth()<=k&&$(".footer-menu").on("click",".menu-title",function(e){e.preventDefault(),$(this).parent().toggleClass("active"),$(this).parent().find(".menu-list").stop().slideToggle("fast")})}function i(){if(b&&$(window).innerWidth()<=k){var e=$(".product-card");e.each(function(e,t){var n=$(this).find(".card-stars"),o=$(this).find(".card-title"),i=$(this).find(".right-block"),a=$(this).find(".card-slider"),s=$(this).find(".parameter-title"),r=$(this).find(".card-count"),d=$(this).find(".parameter-how"),l=$(this).find(".parameter-size");i.insertAfter(a),d.appendTo(l),o.clone().appendTo(s),n.appendTo(s.find(".title-text")),r.appendTo(s.find(".title-text"))})}else if(b&&$(window).innerWidth()<=C){var e=$(".product-card");e.each(function(e,t){var n=$(this).find(".parameter-how"),o=$(this).find(".parameter-size");n.appendTo(o)})}}function a(){b&&$(window).innerWidth()<=k&&$(".sort-filter").find(".filter-button").addClass("closed")}function s(){b&&$(window).innerWidth()<=k&&$(".order-form").find(".step-link").insertBefore($(".order-form").find(".cityInput"))}function r(){b&&$(window).innerWidth()<=k&&$(".order-finish").find(".edit-text").text("Ред.")}function d(){b&&$("body").css("width",$(window).innerWidth()+"px")}function l(e,t){"open"===e?($("#"+t.attr("data-href")).fadeIn("400"),t.addClass("active"),$('<div class="overlayDropdown"></div>').appendTo("body"),$(".overlayDropdown").fadeIn("400"),t.parent().addClass("activeIcon")):"close"===e&&($("#"+t.attr("data-href")).fadeOut("400"),t.removeClass("active"),t.parent().removeClass("activeIcon"),$(".overlayDropdown").fadeOut("400").remove())}function c(e,t,n,o){1!=$(o.target).closest(e).closest(t).length&&$(e).removeClass(n)}function p(e,t,n,o){var e=$(e),t=$(t),n=$(n),i=e.position(),a=e.height();n.css({top:i.top+"px",height:a+"px"}),t.on("mouseover",function(){POSITION=$(this).position(),n.css({height:$(this).height(),top:POSITION.top+"px"})}),$(o).on("mouseleave",function(){n.css({top:i.top+"px",height:a+"px"})})}function u(e,t,n){var e=$(e),t=$(t);e.on("mouseover",function(){POSITION=$(this).position(),t.css({height:$(this).height(),top:POSITION.top+"px",opacity:1})}),$(n).on("mouseleave",function(){t.css({opacity:0})})}function f(){$(window).innerWidth()<C&&($(".menu_nav").on("click",".dropdown-item",function(e){e.preventDefault(),$(".menu_nav").find(".active").removeClass("active"),$(this).parent().addClass("active")}),$(".menu_nav").on("click",".dropdown-close",function(e){e.preventDefault(),$(this).parents(".nav-item").removeClass("active")}),$(window).load(function(){$(window).innerWidth()<C?($(".menu_left").css("height",$("body").innerHeight()+"px"),$(".menu_nav").find(".dropdown").css({width:$(window).innerWidth()-$(".menu_left").innerWidth()+"px",height:$("body").innerHeight()+"px"})):($(".menu_nav").find(".dropdown").removeProp("style"),$(".menu_left").removeProp("style"))}))}function h(e,t,n,o,i){i=void 0===i?4:i,o=void 0===o?3:o,e.owlCarousel({responsive:{0:{items:1},767:{items:o},1025:{items:i}},margin:15,smartSpeed:450,nav:!1}),""===n||void 0===n||""===t||void 0===t||($("#"+n).click(function(){e.trigger("next.owl.carousel")}),$("#"+t).click(function(){e.trigger("prev.owl.carousel")}))}function v(){function e(){W.owlCarousel({smartSpeed:450,callbacks:!0,responsive:{768:{items:2,margin:10},1025:{items:3,margin:15}}})}W.children().length>3&&$(window).innerWidth()>C?($(".compare-nav").css("display","block"),e()):W.children().length>2&&$(window).innerWidth()<C?($(".compare-nav").css("display","block"),e()):$(".compare-nav").removeProp("style")}function g(e,t,n){$(e).on("click",function(e){e.preventDefault();var o=$(this).parents(n).find(t);o.each(function(){$(this).find("input").prop("checked",!1),$(this).parents(".filter-block").removeClass("hasChecked")})})}function m(){(b||$(window).innerWidth()<C)&&$(".product-card").each(function(e,t){var n=$(this).find(".card-reviews"),o=$(this).find("#cardLeftBlock");n.appendTo(o)})}function w(e){var t=e.coords.latitude,n=e.coords.longitude,o=$(".cityInput").find("input"),i=$(".streetInput").find("input");console.log(t+","+n),$.ajax({type:"GET",dataType:"json",url:"http://maps.googleapis.com/maps/api/geocode/json?latlng="+t+","+n+"&sensor=false",data:{},success:function(e){$.each(e.results,function(e,t){$.each(t.address_components,function(e,t){if("locality,political"==t.types&&(""!=t.long_name?(o.val(t.long_name),$(".cityInput").removeClass("invalid"),$(".cityInput").addClass("valid")):(o.val("Местоположение не определенно, введите пожалуйста сами"),$(".cityInput").addClass("invalid")),o.addClass("active"),o.next("label").addClass("active")),"route"==t.types){if(""!=t.long_name){var n=t.long_name;i.val(n.split(" ")[1]),$(".streetInput").removeClass("invalid"),$(".streetInput").addClass("valid"),console.log(t.street_number),console.log(t.route)}else i.val("Местоположение не определенно, введите пожалуйста сами"),$(".streetInput").addClass("invalid");i.addClass("active"),i.next("label").addClass("active")}})}),console.log("Success")},error:function(){console.log("error")}})}var C=1025,k=767,b=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);r(),t(),e(".dropdown-title",".nav-item"),e(".list-name",".category-block"),n(),o(),i(),a(),s(),$(window).resize(function(t){e(".dropdown-title",".nav-item"),e(".list-name",".category-block")}),d(),$(".modal-trigger").leanModal({opacity:.9}),$(".closeModalMaterial").on("click",function(e){e.preventDefault();var t=$(this).attr("data-target");void 0===$(this).attr("data-target")?($(".modalProduct").removeClass("visible"),$(".overlayDropdown").fadeOut("400").remove()):$("#"+t).closeModal()}),$("select").material_select(),$(".deliveryModal").on("click",".clear-input",function(e){e.preventDefault(),$(this).parent().find("input").val("")}),$(".payment-bonuses").on("click",".bonuses-header",function(e){e.preventDefault(),$(this).parent().toggleClass("open"),$(this).parent().find(".bonuses-bropdown").slideToggle("fast")}),$(".loginModal-form").on("keyup",".validate",function(e){0!=$(this).val()&&$(this).parent().hasClass("valid")?($(".loginModal-form").find(".form-button").removeClass("dis-button"),$(".loginModal-form").find(".form-button").addClass("waves-light active")):($(".loginModal-form").find(".form-button").removeClass("waves-light active"),$(".loginModal-form").find(".form-button").addClass("dis-button"))}),$("body").on("click",".dis-button",function(e){e.preventDefault()}),$(".regModal-steps").on("click",".nosocial-checkbox ",function(e){$(".nosocial-checkbox").find("input").is(":checked")?$(".regModal-steps").find(".nosocial-button").addClass("waves-light active step-button"):$(".regModal-steps").find(".nosocial-button").removeClass("waves-light active step-button")}),$(".product-card").on("click",".card-add",function(e){e.preventDefault(),$(this).toggleClass("active")}),$(".child").on("click",".openDrop",function(e){e.preventDefault(),e.stopPropagation(),$(this).parents(".child-dropdown").find(".dropdown").addClass("opened")}),$(".child").on("click",".delete-child",function(e){e.preventDefault(),e.stopPropagation(),$(this).parents(".child").fadeOut("slow").remove()}),$(".sort").on("click",".sort-type",function(e){e.preventDefault();var t=$(".sort").find(".sort-text"),n=$(this).text();t.text(n),$(".sort").find(".active").removeClass("active"),$(this).addClass("active")}),$("#inputSearch").focus(function(e){l("open",$(this))}).focusout(function(e){l("close",$(this))}),$(".removeTextSearch").click(function(e){e.preventDefault(),console.log("click"),$("#inputSearch").val(""),l("close",$("#headerSearch"))}),$(".header-basket").on("click",".info-remove,.info-buy",function(e){e.preventDefault(),e.stopPropagation()}),$(".header-favorites").on("click",".info-buy",function(e){e.preventDefault(),e.stopPropagation()}),$(document).on("click",function(e){c(".dropdown",".header","openDropdown",e),c(".item-link",".menu_left","active",e),c(".menu_left",".row","activeMenu",e),c(".dropdown",".child","opened",e),$(window).innerWidth()<C&&c("#headerSearch",".header","active",e),b&&$(window).innerWidth()<k&&$(".overlayDropdown").fadeOut("400").remove()}),$(".header").on("click",".button-infav,.button-buy",function(){window.location.href=""+$(this).prop("href")}),$(".button-dropdown").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).attr("data-activates"),n=$("#"+t);$(".header").find(".openDropdown").removeClass("openDropdown"),b&&$(window).innerWidth()<k&&($('<div class="overlayDropdown"></div>').appendTo("body"),$(".overlayDropdown").fadeIn("400")),n.addClass("openDropdown")}),$(".closeDropdown").on("click",function(e){e.preventDefault(),$(this).parents(".dropdown").removeClass("openDropdown")}),$(".header-search__button").on("click",".button-link",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).attr("data-activates"),n=$("#"+t);n.addClass("active"),n.find("input").focus()}),$("body").on("click",".closeSearchInputMobile",function(e){e.preventDefault(),$(window).innerWidth()<C&&$("#headerSearch").removeClass("active")}),p(".menu-list li.active",".menu-list li","#userHover",".menu-list"),$(".menu-user").on("click",".toggle-dropdown",function(e){e.preventDefault();var t=$(this).attr("data-id"),n="#"+t;$(this).toggleClass("active"),$(n).slideToggle(400),p(".menu-list li.active",".menu-list li","#userHover",".menu-list")}),$(window).innerWidth()>C&&u(".menu_nav .nav-item","#navHover",".menu_nav"),f(),$(".header").on("click",".menu-open,.open-button",function(e){e.preventDefault(),e.stopPropagation(),$(".menu_left").addClass("activeMenu")}),$(".regModal-steps").on("click",".step-button",function(e){e.preventDefault();var t=$(this).attr("href"),n="#"+t;$(".regModal-steps").removeClass("activeStep"),$(n).addClass("activeStep")}),$(".regModalButton").click(function(e){e.preventDefault(),$(".regModal-steps").removeClass("activeStep"),$("#regModal").find(".regModal-steps").first().addClass("activeStep")});var y=$("#slider"),D=$("#popProd"),S=$("#newProd"),x=$("#prdouctCardSlider"),W=$("#compareSlider");y.owlCarousel({items:1,margin:30,smartSpeed:450}),$("#indexNavRight").click(function(){y.trigger("next.owl.carousel")}),$("#indexNavLeft").click(function(){y.trigger("prev.owl.carousel")}),x.owlCarousel({items:3,margin:15,smartSpeed:450,callbacks:!0}),x.find(".owl-item").first().addClass("currSlide"),$("#prdouctCardSliderNext").click(function(){var e=x.find(".currSlide");x.trigger("next.owl.carousel"),e.next().addClass("currSlide"),e.first().removeClass("currSlide"),$("#productCardImgTop").attr("src",""+x.find(".currSlide").last().find(".slide-img").attr("src"))}),$("#prdouctCardSliderPrev").click(function(){var e=x.find(".currSlide");x.trigger("prev.owl.carousel"),e.prev().addClass("currSlide"),e.last().removeClass("currSlide"),$("#productCardImgTop").attr("src",""+x.find(".currSlide").first().find(".slide-img").attr("src"))}),x.on("click",".owl-item",function(e){e.preventDefault(),x.find(".currSlide").removeClass("currSlide"),$(this).addClass("currSlide"),$("#productCardImgTop").attr("src",""+$(this).find(".slide-img").attr("src"))}),h(D,"pop-cat-l","pop-cat-r"),h(S,"new-cat-l","new-cat-r"),h($("#sowCatSlid"),"","",2,3),$("#sow-cat-r").click(function(){$("#sowCatSlid").trigger("next.owl.carousel")}),$("#sow-cat-l").click(function(){$("#sowCatSlid").trigger("prev.owl.carousel")}),$(window).resize(function(e){v(),f(),d(),console.log($(window).innerWidth())}),v(),$("#compare-r").click(function(){W.trigger("next.owl.carousel")}),$("#compare-l").click(function(){W.trigger("prev.owl.carousel")}),$(".in-basket-item").on("click",function(e){e.preventDefault(),$(this).parents(".product").find(".product-button").hasClass("in-basket")?$(this).parents(".product").find(".product-button").toggleClass("in-basket"):($(this).parents(".product").find(".product-top").removeClass("active"),$(this).parents(".product").find(".product-button").toggleClass("in-basket"),$(this).parents(".product").find(".dropup").removeClass("open"))}),$(".product-button").on("click",function(e){e.preventDefault(),$(this).hasClass("in-basket")?($(this).parents(".product").find(".product-top").toggleClass("active"),$(this).parents(".product").find(".dropup").toggleClass("open")):($(this).toggleClass("active"),$(this).parents(".product").find(".product-top").toggleClass("active"),$(this).parents(".product").find(".dropup").toggleClass("open"))}),$(".clicked-item").on("click",function(e){e.preventDefault(),$(this).toggleClass("active")}),$("body").on("click",".openProductModal",function(e){$(window).innerWidth()>=k&&(e.preventDefault(),$(".modalProduct").fadeIn("300").addClass("visible").css("margin-top",$(window).scrollTop()),$('<div class="overlayDropdown modalOverlay" style="top:0px;background:#546e7a;opacity:.9;z-index:14;"></div>').appendTo("body"),$(".overlayDropdown").fadeIn("400"))}),$("body").on("click",".modalOverlay,.closeModalProduct",function(e){e.preventDefault(),$(".modalProduct").fadeOut("300").removeClass("visible"),$(".overlayDropdown").fadeOut("400",function(){$(".overlayDropdown").remove()})}),$(window).innerWidth()<C&&$(".modalProduct").find(".nav-button").each(function(){$(this).addClass("waves-effect")});var I,T=$(".js-range-slider"),_=$(".js-input"),M=$(".js-input-to"),P=0,O=23e3;T.ionRangeSlider({type:"double",min:P,max:O,from:0,hide_min_max:!0,hide_from_to:!0,onStart:function(e){_.prop("value",e.from),M.prop("value",e.to)},onChange:function(e){_.prop("value",e.from),M.prop("value",e.to),e.from===P&&e.to===O?T.parents(".filter-block").removeClass("hasChecked"):T.parents(".filter-block").addClass("hasChecked")}}),I=T.data("ionRangeSlider"),_.on("change keyup",function(){var e=$(this).prop("value");P>e?e=P:e>O&&(e=O),I.update({from:e,to:e})}),$(".range-reset").on("click",function(e){e.preventDefault(),$(this).parents(".filter-block").removeClass("hasChecked"),I.reset(),_.prop("value",P),M.prop("value",O)}),$(".accardion").on("click",".toggle-accardion, .header-title",function(e){e.preventDefault();var t=$(this).parents(".collapsible-header");$(this).parents(".accardion").hasClass("not-accardion")||(t.next().slideToggle(400),t.toggleClass("active"))}),g(".color-reset",".color-checkbox",".color-section"),$(".brand-item,.color-checkbox").on("click",function(e){e.preventDefault();var t=$(this).find("input");t.prop("checked")?($(this).removeClass("active"),t.prop("checked",!1),$(this).parents(".filter-block").removeClass("hasChecked")):($(this).addClass("active"),t.prop("checked",!0),$(this).parents(".filter-block").addClass("hasChecked"))}),$(".brand-reset").on("click",function(e){e.preventDefault();var t=$(this).parents(".brand-section").find(".brand-item"),n=t.find("input");n.prop("checked",!1),t.removeClass("active"),$(this).parents(".filter-block").removeClass("hasChecked")}),$(".favorites-reset").on("click",function(e){e.preventDefault();var t=$(this).parents(".favorites-section").find(".brand-item"),n=t.find("input");n.prop("checked",!1),t.removeClass("active"),$(this).parents(".filter-block").removeClass("hasChecked")});var R=$(".favorites-a").children().innerHeight(),H='<div class="favorites-all"><p class="all-text">Развернуть</p></div>';$(".favorites-a").children().length>5&&($(".favorites-a").css({height:5*R,overflow:"hidden"}),$(H).appendTo($(".withAll-section").find(".collapsible-body"))),$(".withAll-section").on("click",".favorites-all",function(){$(this).hasClass("open")?(console.log(open),$(".favorites-a").stop().animate({height:5*R},200),$(this).removeClass("open")):($(".favorites-a").stop().animate({height:R*$(".favorites-a").children().length},200),$(this).addClass("open"))});var N=$(window).innerWidth()<=C?$(".menu-right").innerWidth()+15:$(".menu-right").innerWidth()+17;$(".categories-content").css($(".categories-content").hasClass("content-list")?{paddingRight:N+"px"}:{paddingRight:N+"px"}),$(window).innerWidth()>=C&&$(".sort-filter").find("input").prop("checked",!0),$(".sort-filter").on("click",".filter-button",function(e){e.preventDefault();var t=$(this).attr("href"),n=$(""+t),o=-1*(n.innerWidth()+1);$(".categories-content").hasClass("content-list")?$(this).hasClass("closed")?(n.css("right",0),$(".categories-content").css({paddingRight:N+"px"}),$(this).removeClass("closed"),$(".content-list").removeClass("full-list"),$(this).find("input").prop("checked",!1)):($(this).addClass("closed"),$(".content-list").addClass("full-list"),n.css("right",o),$(".categories-content").css({paddingRight:"2px"}),$(this).find("input").prop("checked",!0)):$(this).hasClass("closed")?(n.css("right",0),$(".categories-content").css({paddingRight:N+"px"}),$(this).removeClass("closed"),$(window).innerWidth()>k?$(this).find("input").prop("checked",!1):$(this).find("input").prop("checked",!0),b&&$(window).innerWidth()<k&&$(".categories-content").addClass("opened"),$("#sowCatSlid").trigger("destroy.owl.carousel"),$("#sowCatSlid").html($("#sowCatSlid").find(".owl-stage-outer").html()).removeClass("owl-loaded"),h($("#sowCatSlid"),"","",2,3)):($(this).addClass("closed"),n.css("right",o),$(".categories-content").css({paddingRight:"0px"}),$(window).innerWidth()>k?$(this).find("input").prop("checked",!0):$(this).find("input").prop("checked",!1),b&&$(window).innerWidth()<k&&$(".categories-content").removeClass("opened"),$("#sowCatSlid").trigger("destroy.owl.carousel"),$("#sowCatSlid").html($("#sowCatSlid").find(".owl-stage-outer").html()).removeClass("owl-loaded"),h($("#sowCatSlid"),"","",3,4))}),m(),$(".form-step").on("change","input",function(){""===$(this).val()?$(this).removeClass("active"):$(this).addClass("active")}),$(".form-step").on("click",".city-place",function(e){e.preventDefault(),navigator.geolocation.getCurrentPosition(w)}),$(".step").on("click",".checkb",function(e){var t=$(this).parents(".step-checkbox");$(this).parents(".step").find(".checked").removeClass("checked"),$(".step").find(".toggle").stop(!0,!1).slideUp("fast"),t.addClass("checked"),t.find(".toggle").stop(!0,!1).slideDown("fast")}),$(".order-steps").on("click",".completeStep>.step-header",function(e){$(this).hasClass("opened")?($(this).removeClass("opened"),$(this).next().stop().slideToggle("fast")):($(this).addClass("opened"),$(this).next().stop().slideToggle("fast"))}),$(".tellInputMask").mask("+7 (999) 999-99-99"),$(".step").on("click",".button-link",function(e){e.preventDefault();var t=$(this).parents(".step"),n=t.find(".validate"),o=!1,i="step-1"===t.prop("id")?".invalid":".checked",a="step-1"===t.prop("id")?0:1,s=t.find(i),r=a,d=$(this).attr("href");"step-1"===t.prop("id")?$(n).each(function(e,t){""===$(this).val()?($(this).parent().addClass("invalid"),o=!1):o=!0}):o=!0,o&&s.length===r&&($("body,html").animate({scrollTo:$(""+d).innerHeight()+15},2e3),"#order-finish"===$(this).attr("href")?($(""+d).fadeIn("slow"),$(".animation-steps").fadeOut("fast"),t.addClass("completeStep").removeClass("open")):(t.addClass("completeStep").removeClass("open").find(".step-body").slideUp("slow"),$(""+d).addClass("open").find(".step-body").slideDown("slow")),o=!0)}),$(".order-finish").on("click",".header-edit",function(e){e.preventDefault(),$(this).parents(".order-finish").fadeOut("fast"),$(".animation-steps").fadeIn("slow")}),$(".step").on("click",".basket-button",function(e){var t=$(this).attr("href"),n=$(this).parents(".step");$(this).hasClass("hasLink")||(e.preventDefault(),n.removeClass("open").find(".step-body").slideUp("slow"),$("body,html").animate({scrollTo:$(""+t).scrollTop()},2e3),$(""+t).find(".step-body").slideDown("slow"))}),$(".order-products").on("click",".products-header",function(e){e.preventDefault(),$(this).toggleClass("open"),$(this).next(".products-body").stop().slideToggle("fast")})});