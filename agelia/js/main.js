$(document).ready(function(){function e(e,t){k&&$(window).innerWidth()<=C&&$(".menu_nav").on("click",e,function(e){e.preventDefault(),$(this).parents(t).removeClass("active")})}function t(){k&&$(window).innerWidth()<=C&&$(".menu_nav").on("click",".category-name",function(e){e.preventDefault(),$(this).parents(".category-block").addClass("active")})}function o(){if(k&&$(window).innerWidth()<=C){var e=$(".menu_nav").find(".category-block");e.each(function(e,t){var o='<li class="list-name"><p class="name-text">'+$(this).find(".category-name").find(".name-text").text()+"</p></li>";$(o).prependTo($(this).find(".category-list"))})}}function n(){k&&$(window).innerWidth()<=C&&$(".footer-menu").on("click",".menu-title",function(e){e.preventDefault(),$(this).parent().toggleClass("active"),$(this).parent().find(".menu-list").stop().slideToggle("fast")})}function i(){if(k&&$(window).innerWidth()<=C){var e=$(".product-card");e.each(function(e,t){var o=$(this).find(".card-stars"),n=$(this).find(".card-title"),i=$(this).find(".right-block"),s=$(this).find(".card-slider"),a=$(this).find(".parameter-title"),r=$(this).find(".card-count");i.insertAfter(s),n.clone().appendTo(a),o.appendTo(a.find(".title-text")),r.appendTo(a.find(".title-text"))})}}function s(){k&&$(window).innerWidth()<=C&&($(".sort-filter").find(".filter-button").addClass("closed"),$(".sort-filter").find(".filter-button").find("input").prop("checked",!0))}function a(){k&&$(window).innerWidth()<=C&&$(".order-form").find(".step-link").insertBefore($(".order-form").find(".cityInput"))}function r(){k&&$("body").css("width",$(window).innerWidth()+"px")}function l(e,t){"open"===e?($("#"+t.attr("data-href")).fadeIn("400"),t.addClass("active"),$('<div class="overlayDropdown"></div>').appendTo("body"),$(".overlayDropdown").fadeIn("400"),t.parent().addClass("activeIcon")):"close"===e&&($("#"+t.attr("data-href")).fadeOut("400"),t.removeClass("active"),t.parent().removeClass("activeIcon"),$(".overlayDropdown").fadeOut("400").remove())}function d(e,t,o,n){1!=$(n.target).closest(e).closest(t).length&&$(e).removeClass(o)}function c(e,t,o,n){var e=$(e),t=$(t),o=$(o),i=e.position(),s=e.height();o.css({top:i.top+"px",height:s+"px"}),t.on("mouseover",function(){POSITION=$(this).position(),o.css({height:$(this).height(),top:POSITION.top+"px"})}),$(n).on("mouseleave",function(){o.css({top:i.top+"px",height:s+"px"})})}function p(e,t,o){var e=$(e),t=$(t);e.on("mouseover",function(){POSITION=$(this).position(),t.css({height:$(this).height(),top:POSITION.top+"px",opacity:1})}),$(o).on("mouseleave",function(){t.css({opacity:0})})}function u(){$(window).innerWidth()<w&&($(".menu_nav").on("click",".dropdown-item",function(e){e.preventDefault(),$(".menu_nav").find(".active").removeClass("active"),$(this).parent().addClass("active")}),$(".menu_nav").on("click",".dropdown-close",function(e){e.preventDefault(),$(this).parents(".nav-item").removeClass("active")}),$(window).load(function(){$(window).innerWidth()<w?($(".menu_left").css("height",$("body").innerHeight()+"px"),$(".menu_nav").find(".dropdown").css({width:$(window).innerWidth()-$(".menu_left").innerWidth()+"px",height:$("body").innerHeight()+"px"})):($(".menu_nav").find(".dropdown").removeProp("style"),$(".menu_left").removeProp("style"))}))}function f(e,t,o,n,i){i=void 0===i?4:i,n=void 0===n?3:n,e.owlCarousel({responsive:{0:{items:1},767:{items:n},1025:{items:i}},margin:15,smartSpeed:450,nav:!1}),""===o||void 0===o||""===t||void 0===t||($("#"+o).click(function(){e.trigger("next.owl.carousel")}),$("#"+t).click(function(){e.trigger("prev.owl.carousel")}))}function h(){function e(){x.owlCarousel({margin:15,smartSpeed:450,callbacks:!0,responsive:{768:{items:2},1025:{items:3}}})}x.children().length>3&&$(window).innerWidth()>w?($(".compare-nav").css("display","block"),e()):x.children().length>2&&$(window).innerWidth()<w?($(".compare-nav").css("display","block"),e()):$(".compare-nav").removeProp("style")}function v(e,t,o){$(e).on("click",function(e){e.preventDefault();var n=$(this).parents(o).find(t);n.each(function(){$(this).find("input").prop("checked",!1),$(this).parents(".filter-block").removeClass("hasChecked")})})}function g(){(k||$(window).innerWidth()<w)&&$(".product-card").each(function(e,t){var o=$(this).find(".card-reviews"),n=$(this).find("#cardLeftBlock");o.appendTo(n)})}function m(e){var t=e.coords.latitude,o=e.coords.longitude,n=$(".cityInput").find("input"),i=$(".streetInput").find("input");console.log(t+","+o),$.ajax({type:"GET",dataType:"json",url:"http://maps.googleapis.com/maps/api/geocode/json?latlng="+t+","+o+"&sensor=false",data:{},success:function(e){$.each(e.results,function(e,t){$.each(t.address_components,function(e,t){if("locality,political"==t.types&&(""!=t.long_name?(n.val(t.long_name),$(".cityInput").removeClass("invalid"),$(".cityInput").addClass("valid")):(n.val("Местоположение не определенно, введите пожалуйста сами"),$(".cityInput").addClass("invalid")),n.addClass("active"),n.next("label").addClass("active")),"route"==t.types){if(""!=t.long_name){var o=t.long_name;i.val(o.split(" ")[1]),$(".streetInput").removeClass("invalid"),$(".streetInput").addClass("valid"),console.log(t.street_number),console.log(t.route)}else i.val("Местоположение не определенно, введите пожалуйста сами"),$(".streetInput").addClass("invalid");i.addClass("active"),i.next("label").addClass("active")}})}),console.log("Success")},error:function(){console.log("error")}})}var w=1025,C=767,k=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);t(),e(".dropdown-title",".nav-item"),e(".list-name",".category-block"),o(),n(),i(),s(),a(),$(window).resize(function(t){e(".dropdown-title",".nav-item"),e(".list-name",".category-block")}),r(),$(".modal-trigger").leanModal({opacity:.9}),$("select").material_select(),$(".payment-bonuses").on("click",".bonuses-header",function(e){e.preventDefault(),$(this).parent().toggleClass("open"),$(this).parent().find(".bonuses-bropdown").slideToggle("fast")}),$(".loginModal-form").on("keyup",".validate",function(e){0!=$(this).val()&&$(this).parent().hasClass("valid")?($(".loginModal-form").find(".form-button").removeClass("dis-button"),$(".loginModal-form").find(".form-button").addClass("waves-light active")):($(".loginModal-form").find(".form-button").removeClass("waves-light active"),$(".loginModal-form").find(".form-button").addClass("dis-button"))}),$("body").on("click",".dis-button",function(e){e.preventDefault()}),$(".regModal-steps").on("click",".nosocial-checkbox ",function(e){$(".nosocial-checkbox").find("input").is(":checked")?$(".regModal-steps").find(".nosocial-button").addClass("waves-light active step-button"):$(".regModal-steps").find(".nosocial-button").removeClass("waves-light active step-button")}),$(".product-card").on("click",".card-add",function(e){e.preventDefault(),$(this).toggleClass("active")}),$(".child").on("click",".openDrop",function(e){e.preventDefault(),e.stopPropagation(),$(this).parents(".child-dropdown").find(".dropdown").addClass("opened")}),$(".child").on("click",".delete-child",function(e){e.preventDefault(),e.stopPropagation(),$(this).parents(".child").fadeOut("slow").remove()}),$(".sort").on("click",".sort-type",function(e){e.preventDefault();var t=$(".sort").find(".sort-text"),o=$(this).text();t.text(o),$(".sort").find(".active").removeClass("active"),$(this).addClass("active")}),$("#inputSearch").focus(function(e){l("open",$(this))}).focusout(function(e){l("close",$(this))}),$(".removeTextSearch").click(function(e){e.preventDefault(),console.log("click"),$("#inputSearch").val(""),l("close",$("#headerSearch"))}),$(document).on("click",function(e){d(".dropdown",".header","openDropdown",e),d(".item-link",".menu_left","active",e),d(".menu_left",".row","activeMenu",e),d(".dropdown",".child","opened",e),$(window).innerWidth()<w&&d("#headerSearch",".header","active",e),k&&$(window).innerWidth()<C&&$(".overlayDropdown").fadeOut("400").remove()}),$(".header").on("click",".button-infav,.button-buy",function(){window.location.href=""+$(this).prop("href")}),$(".button-dropdown").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).attr("data-activates"),o=$("#"+t);$(".header").find(".openDropdown").removeClass("openDropdown"),k&&$(window).innerWidth()<C&&($('<div class="overlayDropdown"></div>').appendTo("body"),$(".overlayDropdown").fadeIn("400")),o.addClass("openDropdown")}),$(".closeDropdown").on("click",function(e){e.preventDefault(),$(this).parents(".dropdown").removeClass("openDropdown")}),$(".header-search__button").on("click",".button-link",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).attr("data-activates"),o=$("#"+t);o.addClass("active"),o.find("input").focus()}),$("body").on("click",".closeSearchInputMobile",function(e){e.preventDefault(),$(window).innerWidth()<w&&$("#headerSearch").removeClass("active")}),c(".menu-list li.active",".menu-list li","#userHover",".menu-list"),$(".menu-user").on("click",".toggle-dropdown",function(e){e.preventDefault();var t=$(this).attr("data-id"),o="#"+t;$(this).toggleClass("active"),$(o).slideToggle(400),c(".menu-list li.active",".menu-list li","#userHover",".menu-list")}),$(window).innerWidth()>w&&p(".menu_nav .nav-item","#navHover",".menu_nav"),u(),$(".menu-open").on("click",".open-button",function(e){e.preventDefault(),e.stopPropagation(),$(".menu_left").addClass("activeMenu")}),$(".regModal-steps").on("click",".step-button",function(e){e.preventDefault();var t=$(this).attr("href"),o="#"+t;$(".regModal-steps").removeClass("activeStep"),$(o).addClass("activeStep")}),$(".regModalButton").click(function(e){e.preventDefault(),$(".regModal-steps").removeClass("activeStep"),$("#regModal").find(".regModal-steps").first().addClass("activeStep")});var b=$("#slider"),y=$("#popProd"),D=$("#newProd"),S=$("#prdouctCardSlider"),x=$("#compareSlider");b.owlCarousel({items:1,margin:30,smartSpeed:450}),$("#indexNavRight").click(function(){b.trigger("next.owl.carousel")}),$("#indexNavLeft").click(function(){b.trigger("prev.owl.carousel")}),S.owlCarousel({items:3,margin:15,smartSpeed:450,callbacks:!0}),S.find(".owl-item").first().addClass("currSlide"),$("#prdouctCardSliderNext").click(function(){var e=S.find(".currSlide");S.trigger("next.owl.carousel"),e.next().addClass("currSlide"),e.first().removeClass("currSlide"),$("#productCardImgTop").attr("src",""+S.find(".currSlide").last().find(".slide-img").attr("src"))}),$("#prdouctCardSliderPrev").click(function(){var e=S.find(".currSlide");S.trigger("prev.owl.carousel"),e.prev().addClass("currSlide"),e.last().removeClass("currSlide"),$("#productCardImgTop").attr("src",""+S.find(".currSlide").first().find(".slide-img").attr("src"))}),S.on("click",".owl-item",function(e){e.preventDefault(),S.find(".currSlide").removeClass("currSlide"),$(this).addClass("currSlide"),$("#productCardImgTop").attr("src",""+$(this).find(".slide-img").attr("src"))}),f(y,"pop-cat-l","pop-cat-r"),f(D,"new-cat-l","new-cat-r"),f($("#sowCatSlid"),"","",2,3),$("#sow-cat-r").click(function(){$("#sowCatSlid").trigger("next.owl.carousel")}),$("#sow-cat-l").click(function(){$("#sowCatSlid").trigger("prev.owl.carousel")}),$(window).resize(function(e){h(),u(),r(),console.log($(window).innerWidth())}),h(),$("#compare-r").click(function(){x.trigger("next.owl.carousel")}),$("#compare-l").click(function(){x.trigger("prev.owl.carousel")}),$(".in-basket-item").on("click",function(e){e.preventDefault(),$(this).parents(".product").find(".product-button").hasClass("in-basket")?$(this).parents(".product").find(".product-button").toggleClass("in-basket"):($(this).parents(".product").find(".product-top").removeClass("active"),$(this).parents(".product").find(".product-button").toggleClass("in-basket"),$(this).parents(".product").find(".dropup").removeClass("open"))}),$(".product-button").on("click",function(e){e.preventDefault(),$(this).hasClass("in-basket")?($(this).parents(".product").find(".product-top").toggleClass("active"),$(this).parents(".product").find(".dropup").toggleClass("open")):($(this).toggleClass("active"),$(this).parents(".product").find(".product-top").toggleClass("active"),$(this).parents(".product").find(".dropup").toggleClass("open"))}),$(".clicked-item").on("click",function(e){e.preventDefault(),$(this).toggleClass("active")}),$("body").on("click",".openProductModal",function(e){$(window).innerWidth()>=C&&(e.preventDefault(),$(".modalProduct").addClass("visible").css("margin-top",$(window).scrollTop()),$('<div class="overlayDropdown modalOverlay" style="top:0px;background:#546e7a;opacity:.9;z-index:14;"></div>').appendTo("body"),$(".overlayDropdown").fadeIn("400"))}),$("body").on("click",".modalOverlay,.closeModalProduct",function(e){e.preventDefault(),$(".modalProduct").removeClass("visible"),$(".overlayDropdown").fadeOut("400").remove()});var I,T=$(".js-range-slider"),_=$(".js-input"),W=$(".js-input-to"),P=0,M=23e3;T.ionRangeSlider({type:"double",min:P,max:M,from:0,hide_min_max:!0,hide_from_to:!0,onStart:function(e){_.prop("value",e.from),W.prop("value",e.to)},onChange:function(e){_.prop("value",e.from),W.prop("value",e.to),e.from===P&&e.to===M?T.parents(".filter-block").removeClass("hasChecked"):T.parents(".filter-block").addClass("hasChecked")}}),I=T.data("ionRangeSlider"),_.on("change keyup",function(){var e=$(this).prop("value");P>e?e=P:e>M&&(e=M),I.update({from:e,to:e})}),$(".range-reset").on("click",function(e){e.preventDefault(),$(this).parents(".filter-block").removeClass("hasChecked"),I.reset(),_.prop("value",P),W.prop("value",M)}),$(".accardion").on("click",".toggle-accardion, .header-title",function(e){e.preventDefault();var t=$(this).parents(".collapsible-header");$(this).parents(".accardion").hasClass("not-accardion")||(t.next().slideToggle(400),t.toggleClass("active"))}),v(".color-reset",".color-checkbox",".color-section"),$(".brand-item,.color-checkbox").on("click",function(e){e.preventDefault();var t=$(this).find("input");t.prop("checked")?($(this).removeClass("active"),t.prop("checked",!1),$(this).parents(".filter-block").removeClass("hasChecked")):($(this).addClass("active"),t.prop("checked",!0),$(this).parents(".filter-block").addClass("hasChecked"))}),$(".brand-reset").on("click",function(e){e.preventDefault();var t=$(this).parents(".brand-section").find(".brand-item"),o=t.find("input");o.prop("checked",!1),t.removeClass("active"),$(this).parents(".filter-block").removeClass("hasChecked")}),$(".favorites-reset").on("click",function(e){e.preventDefault();var t=$(this).parents(".favorites-section").find(".brand-item"),o=t.find("input");o.prop("checked",!1),t.removeClass("active"),$(this).parents(".filter-block").removeClass("hasChecked")});var O=$(".favorites-a").children().innerHeight()+15,R='<div class="favorites-all"><p class="all-text">Развернуть</p></div>';$(".favorites-a").children().length>5&&($(".favorites-a").css({height:5*O,overflow:"hidden"}),$(R).appendTo($(".favorites-section").find(".collapsible-body"))),$(".withAll-section").on("click",".favorites-all",function(){$(this).hasClass("open")?(console.log(open),$(".favorites-a").stop().animate({height:5*O},200),$(this).removeClass("open")):($(".favorites-a").stop().animate({height:O*$(".favorites-a").children().length},200),$(this).addClass("open"))});var H=$(window).innerWidth()<=w?$(".menu-right").innerWidth()+15:$(".menu-right").innerWidth()+17;$(".categories-content").css($(".categories-content").hasClass("content-list")?{paddingRight:H+"px"}:{paddingRight:H+"px"}),$(".sort-filter").on("click",".filter-button",function(e){e.preventDefault();var t=$(this).attr("href"),o=$(""+t),n=-1*(o.innerWidth()+1);$(".categories-content").hasClass("content-list")?$(this).hasClass("closed")?(o.css("right",0),$(".categories-content").css({paddingRight:H+"px"}),$(this).removeClass("closed"),$(".content-list").removeClass("full-list"),$(this).find("input").prop("checked",!1)):($(this).addClass("closed"),$(".content-list").addClass("full-list"),o.css("right",n),$(".categories-content").css({paddingRight:"2px"}),$(this).find("input").prop("checked",!0)):$(this).hasClass("closed")?(o.css("right",0),$(".categories-content").css({paddingRight:H+"px"}),$(this).removeClass("closed"),$(this).find("input").prop("checked",!1),$("#sowCatSlid").trigger("destroy.owl.carousel"),$("#sowCatSlid").html($("#sowCatSlid").find(".owl-stage-outer").html()).removeClass("owl-loaded"),f($("#sowCatSlid"),"","",2,3)):($(this).addClass("closed"),o.css("right",n),$(".categories-content").css({paddingRight:"0px"}),$(this).find("input").prop("checked",!0),$("#sowCatSlid").trigger("destroy.owl.carousel"),$("#sowCatSlid").html($("#sowCatSlid").find(".owl-stage-outer").html()).removeClass("owl-loaded"),f($("#sowCatSlid"),"","",3,4))}),g(),$(".form-step").on("change","input",function(){""===$(this).val()?$(this).removeClass("active"):$(this).addClass("active")}),$(".form-step").on("click",".city-place",function(e){e.preventDefault(),navigator.geolocation.getCurrentPosition(m)}),$(".step").on("click",".checkb",function(e){var t=$(this).parents(".step-checkbox");$(this).parents(".step").find(".checked").removeClass("checked"),$(".step").find(".toggle").stop(!0,!1).slideUp("fast"),t.addClass("checked"),t.find(".toggle").stop(!0,!1).slideDown("fast")}),$(".order-steps").on("click",".completeStep>.step-header",function(e){$(this).hasClass("opened")?($(this).removeClass("opened"),$(this).next().stop().slideToggle("fast")):($(this).addClass("opened"),$(this).next().stop().slideToggle("fast"))}),$(".step").on("click",".button-link",function(e){e.preventDefault();var t=$(this).parents(".step"),o=t.find(".validate"),n=!1,i="step-1"===t.prop("id")?".invalid":".checked",s="step-1"===t.prop("id")?0:1,a=t.find(i),r=s,l=$(this).attr("href");"step-1"===t.prop("id")?$(o).each(function(e,t){""===$(this).val()?($(this).parent().addClass("invalid"),n=!1):n=!0}):n=!0,n&&a.length===r&&($("body,html").animate({scrollTo:$(""+l).innerHeight()+15},2e3),"#order-finish"===$(this).attr("href")?($(""+l).fadeIn("slow"),$(".animation-steps").fadeOut("fast"),t.addClass("completeStep").removeClass("open")):(t.addClass("completeStep").removeClass("open").find(".step-body").slideUp("slow"),$(""+l).addClass("open").find(".step-body").slideDown("slow")),n=!0)}),$(".order-finish").on("click",".header-edit",function(e){e.preventDefault(),$(this).parents(".order-finish").fadeOut("fast"),$(".animation-steps").fadeIn("slow")}),$(".step").on("click",".basket-button",function(e){var t=$(this).attr("href"),o=$(this).parents(".step");$(this).hasClass("hasLink")||(e.preventDefault(),o.removeClass("open").find(".step-body").slideUp("slow"),$("body,html").animate({scrollTo:$(""+t).scrollTop()},2e3),$(""+t).find(".step-body").slideDown("slow"))}),$(".order-products").on("click",".products-header",function(e){e.preventDefault(),$(this).toggleClass("open"),$(this).next(".products-body").stop().slideToggle("fast")})});