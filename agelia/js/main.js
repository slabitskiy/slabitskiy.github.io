$(document).ready(function(){function e(){p&&$("body").css("width",$(window).innerWidth()+"px")}function t(e,t,o,n){1!=$(n.target).closest(e).closest(t).length&&$(e).removeClass(o)}function o(e,t,o,n){var e=$(e),t=$(t),o=$(o),i=e.position(),s=e.height();o.css({top:i.top+"px",height:s+"px"}),t.on("mouseover",function(){POSITION=$(this).position(),o.css({height:$(this).height(),top:POSITION.top+"px"})}),$(n).on("mouseleave",function(){o.css({top:i.top+"px",height:s+"px"})})}function n(e,t,o){var e=$(e),t=$(t);e.on("mouseover",function(){POSITION=$(this).position(),t.css({height:$(this).height(),top:POSITION.top+"px",opacity:1})}),$(o).on("mouseleave",function(){t.css({opacity:0})})}function i(){$(window).innerWidth()<d&&($(".menu_nav").on("click",".dropdown-item",function(e){e.preventDefault(),$(".menu_nav").find(".active").removeClass("active"),$(this).parent().addClass("active")}),$(".menu_nav").on("click",".dropdown-close",function(e){e.preventDefault(),$(this).parents(".nav-item").removeClass("active")}),$(window).load(function(){$(window).innerWidth()<d?($(".menu_left").css("height",$("body").innerHeight()+"px"),$(".menu_nav").find(".dropdown").css({width:$(window).innerWidth()-$(".menu_left").innerWidth()+"px",height:$("body").innerHeight()+"px"})):($(".menu_nav").find(".dropdown").removeProp("style"),$(".menu_left").removeProp("style"))}))}function s(e,t,o){e.owlCarousel({responsive:{768:{items:3},1025:{items:4}},margin:15,smartSpeed:450,nav:!1}),$("#"+o).click(function(){e.trigger("next.owl.carousel")}),$("#"+t).click(function(){e.trigger("prev.owl.carousel")})}function a(){function e(){g.owlCarousel({margin:15,smartSpeed:450,callbacks:!0,responsive:{768:{items:2},1025:{items:3}}})}g.children().length>3&&$(window).innerWidth()>d?($(".compare-nav").css("display","block"),e()):g.children().length>2&&$(window).innerWidth()<d?($(".compare-nav").css("display","block"),e()):$(".compare-nav").removeProp("style")}function r(e,t,o){$(e).on("click",function(e){e.preventDefault();var n=$(this).parents(o).find(t);n.each(function(){$(this).find("input").prop("checked")&&$(this).find("input").prop("checked",!1)})})}function c(){(p||$(window).innerWidth()<d)&&$(".product-card").each(function(e,t){var o=$(this).find(".card-reviews"),n=$(this).find("#cardLeftBlock");o.appendTo(n)})}function l(e){var t=e.coords.latitude,o=e.coords.longitude,n=$(".cityInput").find("input");$.ajax({type:"GET",dataType:"json",url:"http://maps.googleapis.com/maps/api/geocode/json?latlng="+t+","+o+"&sensor=false",data:{},success:function(e){$.each(e.results,function(e,t){$.each(t.address_components,function(e,t){"locality,political"==t.types&&(""!=t.long_name?(n.val(t.long_name),$(".cityInput").removeClass("invalid"),$(".cityInput").addClass("valid")):(n.val("Местоположение не определенно, введите пожалуйста сами"),$(".cityInput").addClass("invalid")),n.addClass("active"),n.next("label").addClass("active"))})}),console.log("Success")},error:function(){console.log("error")}})}var d=1025,p=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e(),$(".modal-trigger").leanModal({opacity:.9}),$("select").material_select(),$("#inputSearch").focus(function(e){$("#"+$(this).attr("data-href")).fadeIn("400"),$(this).addClass("active"),$('<div class="overlayDropdown"></div>').appendTo("body"),$(".overlayDropdown").fadeIn("400")}).focusout(function(e){$("#"+$(this).attr("data-href")).fadeOut("400"),$(this).removeClass("active"),$(".overlayDropdown").fadeOut("400").remove()}),$(document).on("click",function(e){t(".dropdown",".header","openDropdown",e),t(".item-link",".menu_left","active",e),t(".menu_left",".row","activeMenu",e),$(window).innerWidth()<d&&t("#headerSearch",".header","active",e)}),$(".button-dropdown").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).attr("data-activates"),o=$("#"+t);$(".header").find(".openDropdown").removeClass("openDropdown"),o.addClass("openDropdown")}),$(".closeDropdown").on("click",function(e){e.preventDefault(),$(this).parents(".dropdown").removeClass("openDropdown")}),$(".header-search__button").on("click",".button-link",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).attr("data-activates"),o=$("#"+t);o.addClass("active"),o.find("input").focus()}),$("body").on("click",".closeSearchInputMobile",function(e){e.preventDefault(),$(window).innerWidth()<d&&$("#headerSearch").removeClass("active")}),o(".menu-list li.active",".menu-list li","#userHover",".menu-list"),$(".menu-user").on("click",".toggle-dropdown",function(e){e.preventDefault();var t=$(this).attr("data-id"),n="#"+t;$(this).toggleClass("active"),$(n).slideToggle(400),o(".menu-list li.active",".menu-list li","#userHover",".menu-list")}),$(window).innerWidth()>d&&n(".menu_nav .nav-item","#navHover",".menu_nav"),i(),$(".menu-open").on("click",".open-button",function(e){e.preventDefault(),e.stopPropagation(),$(".menu_left").addClass("activeMenu")}),$(".step-button").on("click",function(e){e.preventDefault();var t=$(this).attr("href"),o="#"+t;$(".regModal-steps").removeClass("activeStep"),$(o).addClass("activeStep")}),$(".regModalButton").click(function(e){e.preventDefault(),$(".regModal-steps").removeClass("activeStep"),$("#regModal").find(".regModal-steps").first().addClass("activeStep")});var u=$("#slider"),v=$("#popProd"),h=$("#newProd"),f=$("#prdouctCardSlider"),g=$("#compareSlider");u.owlCarousel({items:1,margin:30,smartSpeed:450}),$("#indexNavRight").click(function(){u.trigger("next.owl.carousel")}),$("#indexNavLeft").click(function(){u.trigger("prev.owl.carousel")}),f.owlCarousel({items:3,margin:15,smartSpeed:450,callbacks:!0}),f.find(".owl-item").first().addClass("currSlide"),$("#prdouctCardSliderNext").click(function(){var e=f.find(".currSlide");f.trigger("next.owl.carousel"),e.next().addClass("currSlide"),e.first().removeClass("currSlide"),$("#productCardImgTop").attr("src",""+f.find(".currSlide").last().find(".slide-img").attr("src"))}),$("#prdouctCardSliderPrev").click(function(){var e=f.find(".currSlide");f.trigger("prev.owl.carousel"),e.prev().addClass("currSlide"),e.last().removeClass("currSlide"),$("#productCardImgTop").attr("src",""+f.find(".currSlide").first().find(".slide-img").attr("src"))}),f.on("click",".owl-item",function(e){e.preventDefault(),f.find(".currSlide").removeClass("currSlide"),$(this).addClass("currSlide"),$("#productCardImgTop").attr("src",""+$(this).find(".slide-img").attr("src"))}),s(v,"pop-cat-l","pop-cat-r"),s(h,"new-cat-l","new-cat-r"),$(window).resize(function(t){a(),i(),e(),console.log($(window).innerWidth())}),a(),$("#compare-r").click(function(){g.trigger("next.owl.carousel")}),$("#compare-l").click(function(){g.trigger("prev.owl.carousel")}),$(".in-basket-item").on("click",function(e){e.preventDefault(),$(this).parents(".product").find(".product-button").toggleClass("in-basket"),$(this).parents(".product").find(".product-top").removeClass("active"),$(this).parents(".product").find(".dropup").removeClass("open"),console.log("ads")}),$(".product-button").on("click",function(e){e.preventDefault(),$(this).hasClass("in-basket")?($(this).parents(".product").find(".product-top").toggleClass("active"),$(this).parents(".product").find(".dropup").toggleClass("open")):($(this).toggleClass("active"),$(this).parents(".product").find(".product-top").toggleClass("active"),$(this).parents(".product").find(".dropup").toggleClass("open"))}),$(".clicked-item").on("click",function(e){e.preventDefault(),$(this).toggleClass("active")}),$("body").on("click",".openProductModal",function(e){e.preventDefault(),$(".modalProduct").addClass("visible").css("margin-top",$(window).scrollTop()),$('<div class="overlayDropdown modalOverlay" style="top:0px;background:#546e7a;opacity:.9;z-index:14;"></div>').appendTo("body"),$(".overlayDropdown").fadeIn("400")}),$("body").on("click",".modalOverlay,.closeModalProduct",function(e){e.preventDefault(),$(".modalProduct").removeClass("visible"),$(".overlayDropdown").fadeOut("400").remove()}),$(".view-change").on("click",".change-block",function(e){e.preventDefault(),$(".change-block").removeClass("active"),$(this).addClass("active")});var m,C=$(".js-range-slider"),w=$(".js-input"),k=$(".js-input-to"),b=0,y=23e3;C.ionRangeSlider({type:"double",min:b,max:y,from:0,hide_min_max:!0,hide_from_to:!0,onStart:function(e){w.prop("value",e.from),k.prop("value",e.to)},onChange:function(e){w.prop("value",e.from),k.prop("value",e.to)}}),m=C.data("ionRangeSlider"),w.on("change keyup",function(){var e=$(this).prop("value");b>e?e=b:e>y&&(e=y),m.update({from:e,to:e})}),$(".range-reset").on("click",function(e){e.preventDefault(),m.reset(),w.prop("value",b),k.prop("value",y)}),$(".accardion").on("click",".toggle-accardion, .header-title",function(e){e.preventDefault();var t=$(this).parents(".collapsible-header");$(this).parents(".accardion").hasClass("not-accardion")||(t.next().slideToggle(400),t.toggleClass("active"))}),r(".color-reset",".color-checkbox",".color-section"),$(".brand-item").on("click",function(e){e.preventDefault();var t=$(this).find("input");t.prop("checked")?($(this).removeClass("active"),t.prop("checked",!1)):($(this).addClass("active"),t.prop("checked",!0))}),$(".brand-reset").on("click",function(e){e.preventDefault();var t=$(this).parents(".brand-section").find(".brand-item"),o=t.find("input");o.prop("checked",!1),t.removeClass("active")}),$(".favorites-reset").on("click",function(e){e.preventDefault();var t=$(this).parents(".favorites-section").find(".brand-item"),o=t.find("input");o.prop("checked",!1),t.removeClass("active")});var D=$(".favorites-a").children().innerHeight()+15,S='<div class="favorites-all"><p class="all-text">Развернуть</p></div>';$(".favorites-a").children().length>5&&($(".favorites-a").css({height:5*D,overflow:"hidden"}),$(S).appendTo($(".favorites-section").find(".collapsible-body"))),$(".favorites-section").on("click",".favorites-all",function(){$(this).hasClass("open")?(console.log(open),$(".favorites-a").stop().animate({height:5*D},200),$(this).removeClass("open")):($(".favorites-a").stop().animate({height:D*$(".favorites-a").children().length},200),$(this).addClass("open"))});var x=$(window).innerWidth()<=d?$(".menu-right").innerWidth()+15:$(".menu-right").innerWidth()+17;$(".categories-content").css($(".categories-content").hasClass("content-list")?{paddingRight:x+"px"}:{paddingRight:x+"px"}),$(".sort-filter").on("click",".filter-button",function(e){e.preventDefault();var t=$(this).attr("href"),o=$(""+t),n=-1*(o.innerWidth()+1);$(".categories-content").hasClass("content-list")?$(this).hasClass("closed")?(o.css("right",0),$(".categories-content").css({paddingRight:x+"px"}),$(this).removeClass("closed"),$(".content-list").removeClass("full-list")):($(this).addClass("closed"),$(".content-list").addClass("full-list"),o.css("right",n),$(".categories-content").css({paddingRight:"2px"})):$(this).hasClass("closed")?(o.css("right",0),$(".categories-content").css({paddingRight:x+"px"}),$(this).removeClass("closed")):($(this).addClass("closed"),o.css("right",n),$(".categories-content").css({paddingRight:"0px"}))}),c(),$(".form-step").on("change","input",function(){""===$(this).val()?$(this).removeClass("active"):$(this).addClass("active")}),$(".form-step").on("click",".city-place",function(e){e.preventDefault(),navigator.geolocation.getCurrentPosition(l)}),$(".step").on("click",".checkb",function(e){var t=$(this).parents(".step-checkbox");$(this).parents(".step").find(".checked").removeClass("checked"),$(".step").find(".toggle").stop(!0,!1).slideUp("fast"),t.addClass("checked"),t.find(".toggle").stop(!0,!1).slideDown("fast")}),$(".order-steps").on("click",".completeStep>.step-header",function(e){$(this).toggleClass("opened").next().slideToggle("slow")}),$(".step").on("click",".button-link",function(e){e.preventDefault();var t=$(this).parents(".step"),o=t.find(".step-input"),n=!1,i="step-1"===t.prop("id")?".invalid":".checked",s="step-1"===t.prop("id")?0:1,a=t.find(i),r=s,c=$(this).attr("href");"step-1"===t.prop("id")?$(o).each(function(e,t){""===$(this).find(".validate").val()?($(this).addClass("invalid"),n=!1):n=!0}):n=!0,n&&a.length===r&&(t.addClass("completeStep").removeClass("open").find(".step-body").slideUp("slow"),$("body,html").animate({scrollTo:$(""+c).innerHeight()+15},2e3),$(""+c).addClass("open").find(".step-body").slideDown("slow"),n=!0)}),$(".step").on("click",".basket-button",function(e){var t=$(this).attr("href"),o=$(this).parents(".step");$(this).hasClass("hasLink")||(e.preventDefault(),o.removeClass("open").find(".step-body").slideUp("slow"),$("body,html").animate({scrollTo:$(""+t).scrollTop()},2e3),console.log($(""+t).scrollTop()+","+$(""+t).position().top),$(""+t).addClass("open").find(".step-body").slideDown("slow"))}),$(".order-products").on("click",".products-header",function(e){e.preventDefault(),$(this).toggleClass("open"),$(this).next(".products-body").stop().slideToggle("fast")})});